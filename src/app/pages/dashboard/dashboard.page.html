<app-navbar titulo="Dashboard" avatar="{{ this.avatar }}"></app-navbar>

<ion-content class="ion-padding">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
        <ion-refresher-content
            pullingIcon=""
            pullingText=""
            refreshingSpinner="crescent"
        >
        </ion-refresher-content>
    </ion-refresher>

    <div class="alerts-wrapper"
         *ngIf="alerts.has_confirmation || alerts.has_backend_notification"
    >
        <div class="card card-alert card-alert-reserva"
             *ngIf="alerts.has_confirmation"
             (click)="goToEditConfirm(alerts.confirmation.clase_id)"
        >
            <div class="ps-row">
                <div class="col-2 icon">
                    <ion-icon src="/assets/icon/calendar.svg"></ion-icon>
                </div>
                <div class="col-10 text">
                    <p>
                        Tienes una clase reservada a las {{ alerts.confirmation.start }}
                        ¡Confírma tu asistencia!
                    </p>
                </div>
            </div>
        </div>
        
        <div *ngIf="alerts?.has_backend_notification">
            <div class="card card-alert card-alert-info"  *ngFor="let bn of alerts.backend_notification" >
    
                <div class="ps-row">
                    <div class="col-2 icon">
                        <ion-icon src="/assets/icon/info.svg"></ion-icon>
                    </div>
                    <div class="col-10 text">
                        <p [innerHTML]="bn.message"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
  
    <div class="section wod-resumen">
        <!-- Tranisition effect. Could be "slide", "fade", "cube", "coverflow" or "flip" -->
        <ion-slides pager="true">
            <ion-slide *ngFor="let wod of wods; let i = index" class="wod-slide">
                <div class="card-header">
                    <h1 class="title-section">{{ wod.claseType }}</h1>
                    
                    <!-- <div class="step-icon">
                        <div class="step"
                             *ngFor="let wod of wods; let num = index"
                             [ngClass]="{'active':num == i}"
                        >
                        </div>
                    </div> -->
                </div>
                <div class="card card-resumen mb-3">
                    <div class="text-box-resumen" *ngIf="wod.rels.hasStages">
                        <p *ngFor="let stage of wod.rels.stages as key">
                            <b class="mb-2">{{ stage.name }}</b><br/>
                            {{ stage.description }}
                        </p>
                    
                        <!-- <p *ngIf="!wod.rels.stages.has">
                            No hay WOD registrado para el dia de hoy.
                        </p> -->
                    </div>
                </div>
            </ion-slide>
        </ion-slides>
    </div>

    <div class="section">
        <h1 class="title-section">
            Progreso de peso
        </h1>
        
        <div class="card card-asistencia">
            <!-- <canvas #barCanvas></canvas> -->
            <canvas baseChart
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                chartType="line"
                [options]="lineChartOptions"
            >
            </canvas>
        </div>
    </div>
</ion-content>
